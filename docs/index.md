# API Max: Документация

!!! danger "WARN:"
    Документация доделана не до конца!

## 1. Обзор
API Max построен вокруг одного вебсокета: `wss://ws-api.oneme.ru/websocket`.

## 2. Подключение
- Требуется заголовок Origin с значением 'https://web.max.ru'.
- Подключение свободное и мгновенное.

## 3. Формат сообщений
Все сообщения, как отправляемые клиентом, так и получаемые от сервера, имеют следующий вид:


```json
{
  "ver": 11,       // Версия протокола
  "cmd": 0,        // Команда: 0 - клиент, 1 - сервер
  "seq": 0,        // Порядковый номер запроса, увеличивается на 1 с каждым новым
  "opcode": 6,     // Тип запроса (например, 6 - handshake)
  "payload": {}    // Полезная нагрузка сообщения
}
```

| Аргумент   | Тип    | Обязательный | Описание                     |
|:------------|:--------:|:--------------:|:------------------------------|
| `ver`   | int | ✅           | Версия протокола (пока всегда 11) |
| `cmd`     | int | ✅           | Идентификатор отправителя: `0` — клиент, `1` — сервер|
| `seq` | int    | ❌           | Счётчик сообщений, увеличивается на 1 с каждым новым запросом      |
| `opcode` | int | ✅ | Тип запроса (например, `6` — handshake) |
| `payload` | dict[Any] | ✅ | Основные данные сообщения |
